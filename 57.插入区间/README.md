# [57. 插入区间](https://leetcode-cn.com/problems/insert-interval/solution/cha-ru-qu-jian-by-leetcode-solution/)

## 模拟

给定的区间集合中所有区间互不重叠，在需要插入一个新区间 `S = [left, right]` 时，

- 找出所有与新区间 S 重叠的所有区间
- 与新区间合并成一个大区间 S'
- 最终返回与大区间 S' 不重叠的所有区间

由于给定的区间集合已经按照左端点排序，所有与新区间 `S = [left, right]` 重叠的区间在数组中是连续，因此可以对所有区间进行一次遍历，找出对应的下标范围

### 解题思路

1. 遍历数组各个区间的左右端点，分别是 `li` 左端点和 `ri` 右端点
2. 如果 `ri < left`，说明当前区间与 S 不重叠且在其左侧，将 `[li, ri]` 加入结果 `ans`
3. 如果 `li > right`，说明当前区间与 S 不重叠且在其右侧
    - 如果 S 从来没有插入到结果，那么先将 S 加入结果，再将 `[li, ri]` 加入结果
    - 如果 S 或 S 的并集已经在结果中，直接将 `[li, ri]` 加入结果
4. 否则，当前区间与 S 重叠，需将 S 与当前区间合并，即将 S 更新为其并集 `S = [min(li, left), max(ri, right)]`
5. 如果 S 跟数组中所有区间都不重叠或者跟区间合并完位于数组的最后（即数组不存在位于 S 右侧的区间），那么在返回结果前，将 `[left, right]` 加入结果

### 复杂度

- 时间复杂度：O(N) 其中 N 为区间的数量
- 空间复杂度：O(1) 无额外空间
